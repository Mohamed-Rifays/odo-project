<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EcoFinds Marketplace</title>
  <style>
    :root {
      --brand: #2E7D32;
      --shadow: 0 6px 18px rgba(0,0,0,0.25);
      --accent: rgba(255,255,255,0.95);
      --height: 52vh;
      --dot-size: 10px;
    }
    body { font-family: Inter, system-ui, sans-serif; margin: 0; }

    /* HEADER */
    .header {
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--brand);
      color: white;
      position: relative;
      z-index: 10;
    }
    .logo img { height: 40px; }
    .navigations {
      display: flex;
      gap: 20px;
    }
    .navigations a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
      transition: 0.2s;
    }
    .navigations a:hover { text-decoration: underline; }
    .cart-user { display: flex; align-items: center; gap: 20px; }
    .cart-logo { width: 40px; cursor: pointer; }
    .user-profile {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      object-fit: cover;
      cursor: pointer;
    }
    .user-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: #1b5e20;
      color: white;
      font-weight: bold;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    /* Hamburger */
    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
    }
    .hamburger span {
      width: 25px;
      height: 3px;
      background: white;
      border-radius: 2px;
      transition: 0.3s;
    }

    /* Mobile Nav */
    .mobile-nav {
      max-height: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 12px;
      background: var(--brand);
      padding: 0 20px;
      transition: max-height 0.4s ease, padding 0.4s ease;
    }
    .mobile-nav.open {
      max-height: 300px; /* enough space for links */
      padding: 15px 20px;
    }
    .mobile-nav a {
      color: white;
      text-decoration: none;
      font-weight: 500;
    }

    /* SEARCH */
    .search-box { display: flex; justify-content: center; margin: 30px 0 15px 0; }
    .search-input-box {
      width: 600px;
      max-width: 90%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      transition: 0.2s;
    }
    .search-input-box:hover {
      border-color: var(--brand);
      box-shadow: 0 0 5px rgba(46, 125, 50, 0.3);
    }

    /* OPTIONS */
    .options {
      display: flex;
      gap: 15px;
      justify-content: flex-end;
      margin-bottom: 20px;
      margin-right: 3px;
    }
    .options select {
      padding: 8px 12px;
      border: 1px solid #aaa;
      border-radius: 6px;
      background: white;
      font-size: 14px;
      cursor: pointer;
      transition: 0.2s;
    }
    .options select:hover {
      border-color: var(--brand);
      box-shadow: 0 0 5px rgba(46, 125, 50, 0.3);
    }

    /* BANNER SLIDER */
    .banner-slider {
      position: relative;
      width: 100%;
      height: var(--height);
      overflow: hidden;
      background: #111;
    }
    .slide {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      opacity: 0;
      transform: scale(1.02);
      transition: opacity .7s ease, transform .7s ease;
      pointer-events: none;
    }
    .slide.active { opacity: 1; transform: scale(1); pointer-events: auto; }
    .slide img { width: 100%; height: 100%; object-fit: cover; }
    .caption {
      position: absolute;
      left: 2rem;
      bottom: 2rem;
      max-width: 58%;
      color: var(--accent);
      padding: 1rem;
      background: rgba(46, 125, 50, 0.8);
      border-radius: 12px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(4px);
    }
    .caption h2 { margin: 0 0 .35rem 0; font-size: clamp(18px, 3.2vw, 30px); }
    .caption p { margin: 0; opacity: .95; }

    /* ARROWS */
    .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 6;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--brand);
      color: white;
      display: grid;
      place-items: center;
      cursor: pointer;
      box-shadow: var(--shadow);
      border: none;
    }
    .arrow.left { left: 1rem; }
    .arrow.right { right: 1rem; }

    /* DOTS */
    .dots {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 1rem;
      display: flex;
      gap: .5rem;
      z-index: 7;
    }
    .dot {
      width: var(--dot-size);
      height: var(--dot-size);
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      border: 2px solid var(--brand);
      cursor: pointer;
      transition: .3s;
    }
    .dot.active { background: var(--brand); transform: scale(1.1); }

    @media (max-width: 768px) {
      .navigations { display: none; }
      .hamburger { display: flex; }
      .options { flex-direction: column; align-items: stretch; }
      .options select { width: 100%; }
      .banner-slider { height: 35vh; }
    }
    @media (max-width: 480px) {
      .logo img { height: 28px; }
      .cart-logo { width: 28px; }
      .user-profile, .user-avatar { width: 28px; height: 28px; font-size: 14px; }
      .caption { font-size: 14px; padding: .6rem; }
      .arrow { width: 32px; height: 32px; }
    }

    /* PRODUCTS */
.products {
  padding: 20px;
}

.categories {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}
.category-btn {
  padding: 10px 20px;
  border: 1px solid #aaa;
  border-radius: 8px;
  background: white;
  cursor: pointer;
  font-weight: 500;
  transition: 0.2s;
}
.category-btn:hover {
  border-color: var(--brand);
  background: #f1f8f2;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
  justify-content: center;   /* ✅ centers the grid items */
  max-width: 1000px;         /* ✅ optional: keeps it nicely contained */
  margin: 0 auto;   
}

.product-card {
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  transition: 0.3s;
  background: white;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.product-card img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 8px;
  margin-bottom: 10px;
}
.product-card h3 {
  font-size: 16px;
  margin: 8px 0;
}
.product-card .price {
  color: var(--brand);
  font-weight: bold;
}

  </style>
</head>
<body>
  <div class="landing-page"></div>

  <!-- ✅ React CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
   function Header() {
      const [user, setUser] = React.useState(null);
      const [menuOpen, setMenuOpen] = React.useState(false);

      React.useEffect(() => {
        const token = sessionStorage.getItem("token");
        if (!token) return;
        fetch("/api/me", { headers: { Authorization: "Bearer " + token } })
          .then(res => res.ok ? res.json() : null)
          .then(data => { if (data) setUser(data); })
          .catch(err => console.error(err));
      }, []);

      function goToProfile() { window.location.href = "profile.html"; }

      function UserAvatar({ user }) {
        if (user.profile_pic && user.profile_pic !== "/img/default-user.png") {
          return (
            <img className="user-profile" src={user.profile_pic} alt="Profile" onClick={goToProfile}/>
          );
        }
        const letter = user.name ? user.name.charAt(0).toUpperCase() : "U";
        return <div className="user-avatar" onClick={goToProfile}>{letter}</div>;
      }

      function NavLinks() {
        return (
          <>
            <a>My Listings</a>
            <a>Add Product</a>
            <a>About</a>
            <a>Contact</a>
            {!user && <a href="login.html">Login</a>}
            {!user && <a href="signup.html">SignUp</a>}
          </>
        );
      }

      return (
        <>
          <div className="header">
            <div className="logo">
              <img src="img/logo.png" alt="EcoFinds Logo"/>
            </div>
            <div className="navigations">
              <NavLinks/>
            </div>
            <div className="cart-user">
              <img className="cart-logo" src="img/cart-logo.png" alt="Cart"/>
              {user ? <UserAvatar user={user}/> :
                <img className="user-profile" src="img/default-user.png" alt="User"
                     onClick={() => window.location.href="login.html"}/>}
              <div className="hamburger" onClick={() => setMenuOpen(!menuOpen)}>
                <span></span><span></span><span></span>
              </div>
            </div>
          </div>

          <div className={`mobile-nav ${menuOpen ? "open" : ""}`}>
            <NavLinks/>
          </div>
        </>
      );
    }

    function Search() {
      return (
        <div className="search-box">
          <input className="search-input-box" type="text" placeholder="Search products..."/>
        </div>
      );
    }

    function Options() {
      return (
        <div className="options">
          <select defaultValue="">
            <option value="" disabled hidden>Sort By</option>
            <option value="price-low-high">Price: Low → High</option>
            <option value="price-high-low">Price: High → Low</option>
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="rating">Customer Rating</option>
          </select>
          <select defaultValue="">
            <option value="" disabled hidden>Filter By</option>
            <option value="brand">Brand</option>
            <option value="condition-new">Condition: New</option>
            <option value="condition-used">Condition: Used</option>
            <option value="in-stock">Availability: In Stock</option>
            <option value="discount">On Discount</option>
            <option value="rating-4plus">Rating: 4★ & above</option>
          </select>
          <select defaultValue="">
            <option value="" disabled hidden>Group By</option>
            <option value="category">Category</option>
            <option value="price-range">Price Range</option>
            <option value="condition">Condition</option>
            <option value="seller">Seller</option>
            <option value="location">Location</option>
            <option value="date">Date Added</option>
          </select>
        </div>
      );
    }

    /* Banner code unchanged ... */
    // keep your Banner + App as is
    function Banner() {
      React.useEffect(() => {
        const slider = document.getElementById('banner');
        const slides = Array.from(slider.querySelectorAll('.slide'));
        const prevBtn = document.getElementById('prev');
        const nextBtn = document.getElementById('next');
        const dotsWrap = document.getElementById('dots');
        let current = 0, timer = null;

        function goTo(index) {
          if(index < 0) index = slides.length - 1;
          if(index >= slides.length) index = 0;
          slides.forEach((s,i)=> s.classList.toggle('active', i===index));
          updateDots(index);
          current = index;
        }
        function next(){ goTo(current + 1) }
        function prev(){ goTo(current - 1) }

        slides.forEach((_,i)=>{
          const d = document.createElement('button');
          d.className = 'dot' + (i===0? ' active':'' );
          d.addEventListener('click', ()=>{ goTo(i); resetTimer(); });
          dotsWrap.appendChild(d);
        });
        function updateDots(idx){
          Array.from(dotsWrap.children).forEach((d,i)=> d.classList.toggle('active', i===idx));
        }

        prevBtn.addEventListener('click', ()=>{ prev(); resetTimer(); });
        nextBtn.addEventListener('click', ()=>{ next(); resetTimer(); });

        function startTimer(){ timer = setInterval(()=>{ next(); }, 3000); }
        function stopTimer(){ clearInterval(timer); timer = null; }
        function resetTimer(){ stopTimer(); startTimer(); }

        goTo(0);
        startTimer();
      }, []);

      return (
        <section className="banner-slider" id="banner">
          <div className="slide active">
            <img src="img/slide-image-1.jpg" alt="Sustainable Living"/>
            <div className="caption">
              <h2>Welcome to EcoFinds</h2>
              <p>Discover sustainable second-hand treasures today.</p>
            </div>
          </div>
          <div className="slide">
            <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop" alt="Second-hand Clothing"/>
            <div className="caption">
              <h2>Reduce. Reuse. Resell.</h2>
              <p>Support the planet while shopping smart.</p>
            </div>
          </div>
          <div className="slide">
            <img src="https://images.unsplash.com/photo-1585386959984-a4155223f7f9?q=80&w=1600&auto=format&fit=crop" alt="Eco-friendly Products"/>
            <div className="caption">
              <h2>Eco-Friendly Marketplace</h2>
              <p>Join our community of conscious consumers.</p>
            </div>
          </div>
          <button className="arrow left" id="prev">‹</button>
          <button className="arrow right" id="next">›</button>
          <div className="dots" id="dots"></div>
        </section>
      );
    }

    function Products() {
  const categories = ["All Categories"];
  const products = [
    { id: 1, name: "Eco Tote Bag", img: "img/product1.jpg", price: "$15" },
    { id: 2, name: "Recycled Bottle", img: "img/product2.jpg", price: "$10" },
    { id: 3, name: "Bamboo Toothbrush", img: "img/product3.jpg", price: "$5" },
    { id: 4, name: "Organic T-Shirt", img: "img/product4.jpg", price: "$20" },
  ];

  return (
    <section className="products">
      {/* Categories Bar */}
      <div className="categories">
        {categories.map((c, i) => (
          <button key={i} className="category-btn">{c}</button>
        ))}
      </div>

      {/* Product Grid */}
      <div className="product-grid">
        {products.map(p => (
          <div key={p.id} className="product-card">
            <img src={p.img} alt={p.name}/>
            <h3>{p.name}</h3>
            <p className="price">{p.price}</p>
          </div>
        ))}
      </div>
    </section>
  );
}

    function App() {
      return (
        <>
          <Header/>
          <Banner/>
          <Search/>
          <Options/>
          <Products/>
        </>
      );
    }

    const container = document.querySelector('.landing-page');
    const root = ReactDOM.createRoot(container);
    root.render(<App/>);
  </script>
</body>
</html>
